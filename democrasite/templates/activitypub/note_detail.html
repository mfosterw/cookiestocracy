{% extends "activitypub/base.html" %}

{% block sub_title %}
  Note by {{ note.author }}
{% endblock sub_title %}

{% block activitypub_content %}

  <div class="row justify-content-center">
    <div class="justify-content-center col-10 mb-3">
      {% if note.get_ancestors %}
        {% include "activitypub/snippets/note_list.html" with note_list=note.get_ancestors empty_message="" %}
      {% endif %}
    </div>
  </div>

  <div class="row justify-content-center mb-3">
    <div class="col-8">
      <p class="mb-1">{{ note.content }}</p>
      <small>Posted by: <a href="{% url 'activitypub:person-detail' username=note.author.display_name %}">{{ note.author.display_name }}</a> on {{ note.created|date:"Y-m-d H:i" }}</small>
      {% if note.in_reply_to %}
        <br />
        <small>In reply to: <a href="{% url 'activitypub:note-detail' note.in_reply_to.id %}">{{ note.in_reply_to.content|truncatewords:10 }}</a></small>
      {% endif %}
      {% if user.is_authenticated %}
        <a class="float-right position-relative text-secondary"
           href="{% url 'activitypub:note-reply' note.id %}">
          <small>Reply</small>
        </a>
      {% endif %}
    </div>
  </div>

  {% include "activitypub/snippets/note_list.html" with note_list=note.get_children empty_message="No replies yet." %}
{% endblock activitypub_content %}
